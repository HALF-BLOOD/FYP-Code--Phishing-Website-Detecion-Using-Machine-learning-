<!DOCTYPE html>
<html>
  <head>
    <title>My Extension</title>
    <script src="popup.js"></script>
    <style>
      body {
        min-width: 200px;
        overflow-x: hidden;
      }
      #power {
        font-size: 16px;
        font-weight: bold;
        padding: 5px 10px;
        border: none;
        background-color: #ff0000;
        color: #fff;
        cursor: pointer;
        margin-bottom: 10px;
      }
      #url {
        font-size: 14px;
        margin-bottom: 10px;
      }
    </style>
  </head>

  <script>
    // Set a flag to indicate that the extension is currently powered on
    var poweredOn = true;
    // Add an event listener for when the power button is clicked
    document.getElementById('power').addEventListener('click', function() {
      if (poweredOn) {
        // Send a message to the background script to close the current tab
        chrome.runtime.sendMessage({action: 'closeCurrentTab'});
        // Update the power button to display "Power Off"
        document.getElementById('power').innerText = 'Power Off';
        // Get the current URL
        var currentUrl = document.getElementById('url').innerText;
        // Send the URL to the Python code
        chrome.runtime.sendMessage({action: 'sendUrl', url: currentUrl});
        // Set the poweredOn flag to false
        poweredOn = false;
      } else {
        // Update the power button to display "Power On"
        document.getElementById('power').innerText = 'Power On';
        // Set the poweredOn flag to true
        poweredOn = true;
      }
    });
    // Call the updateUrl function to display the current URL in the popup
    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
      updateUrl(tabs[0].url);
    });
    function updateUrl(url) {
      document.getElementById('url').innerText = url;
    }
  </script>
  <body>
    <h1>My Extension</h1>
    <button id="power">Power On</button>
    <p id="url">Loading...</p>
  </body>
</html>
